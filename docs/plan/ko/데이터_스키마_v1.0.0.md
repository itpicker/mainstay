# Mainstay 데이터 및 상태 스키마: 협업 인텔리전스
- **버전**: 1.0.0
- **작성 시간**: 2025-12-27 16:57

다음 스키마는 프로젝트 컨텍스트와 전문가 상호작용이 어떻게 저장되고 공유되는지 정의합니다.

## 1. 프로젝트 인텔리전스 (공유 상태)
모든 전문가가 읽고 기여할 수 있는 중앙 집중식 상태 객체입니다.

```python
class ProjectState(TypedDict):
    project_id: str
    messages: Annotated[list[AnyMessage], add_messages] # 협업 이력
    team: List[Dict]                                    # 활성 전문가 (채용된 에이전트)
    goal_dag: Dict[str, Any]                           # 상태가 포함된 라이브 작업 그래프
    knowledge_base: Dict[str, Any]                      # 공유된 발견 및 데이터
    execution_logs: List[str]                          # 전문 활동 로그
    active_specialist: str                             # 현재 제어권을 가진 전문가
```

## 2. 전문가 구성
에이전트의 페르소나와 기본 역량을 정의하는 메타데이터입니다.

```json
{
  "role": "Developer",
  "persona": "효율적이고 보안을 중시하며 PEP8을 준수함",
  "base_tools": ["terminal", "python_sandbox", "file_manager"],
  "specialty_description": "복잡한 로직을 작성하고 시스템 오류를 디버깅할 수 있습니다."
}
```

## 3. 동적 작업 스키마 (Goal DAG)
협업 계획 내에서 작업이 표현되는 방식입니다.

```json
{
  "task_id": "T001",
  "title": "경쟁사 API 분석",
  "assignee": "Researcher",
  "status": "pending | In-progress | completed | blocked",
  "dependencies": [],
  "output": "경쟁사 엔드포인트가 포함된 JSON 객체",
  "reviewers": ["PM", "Developer"]
}
```

## 4. Meta-Tool 메타데이터
프로젝트 도중 생성된 도구의 구조입니다.

```json
{
  "tool_id": "custom_data_parser_v1",
  "author": "Developer Agent",
  "purpose": "분석가를 위해 비표준 CSV 형식을 파싱함",
  "code_path": "backend/tools/dynamic/parser.py",
  "verified_by": "Support Lead"
}
```
